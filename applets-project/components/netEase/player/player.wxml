<!-- 播放器-核心 -->
<view class="playerItem bg-white">
    <!-- 底部栏 -->
    <swiper class="swiper-playslide" duration="300" bindchange="Playerslide" style="height:130rpx"
        current="{{playIndex}}">
        <swiper-item wx:for="{{randomSwitch?randomList:song}}" wx:key="index">
            <view>
                <view class="playerContent flex justify-between align-center" catchtap="showPopup">
                    <view class="flex align-center">
                        <view>
                            <image class="round" src="https://cdn.jsdelivr.net/gh/devil-trigger/Comprehensive-applets@master/otherData/{{item.cover}}" mode="aspectFill">
                            </image>
                        </view>
                        <view class="padding-lg flex">
                            <view class="text-bold">{{item.name}}</view>
                            <view> - {{item.singer}}</view>
                        </view>
                    </view>
                    <view class="flex playerTag">
                        <view class="text-df playTag text-center round margin-right" catchtap="playSwitchFun">
                            <text class="cuIcon-{{playerState?'stop':'playfill'}}"></text>
                        </view>
                        <view class="sortTag margin-right" catchtap="onplayerList">
                            <text class="cuIcon-sort"></text>
                        </view>
                    </view>
                </view>
            </view>
        </swiper-item>
    </swiper>
</view>


<!-- 播放器 弹出层 -->
<van-popup show="{{ popupDisplay }}" bind:close="popupClose" position="bottom"
    custom-style="height: 97%;background:#f3f3f3" round='true' catchtouchmove='prohibit'>
    <view class="song-bg"></view>
    <view class="popupItem">
        <!-- 顶部 标题|歌手|分享 -->
        <view>
            <view class="text-white padding flex justify-between text-lg">
                <view class="padding-xs" bindtap="popupClose">
                    <text class="cuIcon-unfold"></text>
                </view>
                <view class="text-center">
                    <view>{{randomSwitch?randomList[playIndex].name:song[playIndex].name}}</view>
                    <view class="text-xs">{{randomSwitch?randomList[playIndex].singer:song[playIndex].singer}}</view>
                </view>
                <view class="padding-xs">
                    <text class="cuIcon-forward"></text>
                </view>
            </view>
        </view>
        <view class="player-popContent">
            <!-- 唱片 | 歌词 -->
            <view>
                <swiper class="" duration="300" style="height:60vh;">
                    <!-- 唱片 展示 模块-->
                    <swiper-item>
                        <view class="record-content flex justify-center align-center padding margin-top">
                            <view class="recordImg">
                                <!-- 唱片|专辑 -->
                                <view class="recordItem {{playerState?'':'playerPaused'}}">
                                    <view class="record">
                                        <image src="/image/music-page/record.png" mode="aspectFit"></image>
                                    </view>
                                    <view class="album round {{playerState?'':'playerPaused'}}">
                                        <image src="https://cdn.jsdelivr.net/gh/devil-trigger/Comprehensive-applets@master/otherData/{{randomSwitch?randomList[playIndex].cover:song[playIndex].cover}}" mode="aspectFit">
                                        </image>
                                    </view>
                                </view>
                                <!-- 唱片指针 -->
                                <view class="needle {{playerState?'needlePlay':'needlePause'}}">
                                    <image src="/image/music-page/needle-ab.png" mode="aspectFit"></image>
                                </view>
                            </view>
                        </view>
                    </swiper-item>
                    <!-- 歌词 模块 -->
                    <swiper-item>
                        <view>
                            歌词
                        </view>
                    </swiper-item>
                </swiper>
            </view>
            <!-- 按钮组 -->
            <view class="popupPlayer">
                <view class="flex align-center justify-between margin-sm text-sm text-white">
                    <view>{{slideInfo.progressText}}</view>
                    <view class="play-progress">
                        <van-slider value="{{slideInfo.progress}}" bar-height='7rpx' active-color="#fff"
                            inactive-color="#676767" use-button-slot step="0.5" bind:change="changeSlider"
                            bind:drag="dragSlider">
                            <view class="custom-button round" slot="button">
                            </view>
                        </van-slider>
                    </view>
                    <view>{{slideInfo.durationText}}</view>
                </view>
                <view>
                    <view class="padding flex justify-center align-center popup-playerItem">
                        <view class="popupTag" bindtap="lastSong">
                            <image src="/image/music-page/playIcon/previous.svg"></image>
                        </view>
                        <view class="popup-playItem round" bindtap="playSwitchFun">
                            <image src="/image/music-page/playIcon/{{playerState}}.svg"></image>
                        </view>
                        <view class="popupTag" bindtap="nextSong">
                            <image src="/image/music-page/playIcon/next.svg"></image>
                        </view>
                    </view>
                </view>
            </view>
        </view>
    </view>
</van-popup>




<!-- 播放列表弹出层 -->
<van-popup show="{{ playerList }}" catchtouchmove='prohibit' position="bottom" round custom-style="height:70%;"
    closeable bind:close="popupClose" close-icon='arrow-down'>
    <view class="margin-top margin-left margin-right">
        <view class="margin-bottom">
            当前播放<text class="text-xs text-gray">（{{song.length}}）</text>
        </view>
        <view>
            <view class="playerList-content flex justify-between">
                <view class="text-sm flex align-center padding-xs" wx:for="{{playMode}}" wx:key='index'
                    wx:if="{{index==playModeIndex}}" bindtap="modeSwitch" data-index="{{index}}">
                    <view>
                        <image src="/image/music-page/playIcon/player-{{index+1}}.svg" mode="aspectFit"></image>
                    </view>
                    <view class="margin-left-xs">
                        {{item}}
                    </view>
                </view>
                <view class="padding-xs">
                    <text class="cuIcon-delete"></text>
                </view>
            </view>
        </view>
    </view>
    <view class="margin-top-sm">
        <view wx:for="{{song}}" wx:key="index" bindtap="listSongSwitch" data-index="{{index}}">
            <view
                class="playerList-Item flex justify-between align-center margin-bottom-xs radius padding-left padding-right padding-top-xs padding-bottom-xs {{index==playListIndex?'bg-gray':''}}">
                <view>
                    {{item.name}}
                    <text class="text-xs text-gray"> - {{item.singer}}</text>
                </view>
                <view class="padding-xs" bindtap="deleteListSong" data-index="{{index}}">
                    <text class="cuIcon-close text-lg"></text>
                </view>
            </view>
        </view>
    </view>
</van-popup>